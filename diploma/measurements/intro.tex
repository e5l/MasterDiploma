\subsection{Особенности измерений} \label{measurement_details}
Для корректной интерпретации результатов измерений необходимо чтобы измерения были сделаны с учётом того, как исходный код исполняется на целевой платформе. Для этого рассмотрим как происходит выполнение исходного кода.

Целевой платформой для компиляции является виртуальная машина языка \lang{Java}. Программы представляют из себя инструкции байткода, который, в зависимости от ситуации, может быть исполнен интерпретатором, либо он может быть скомпилирован в машинный код и выполнен на процессоре. Трансляция байткода в исходный код может занимать длительное время. Во время трансляции исходного кода так же происходит его анализ: исключаются неиспользуемые участки кода, вычисляются константы. Выполнение машинного кода может быть в десятки раз быстрее интерпретации.

Одной из существенных проблем является измерение времени работы метода: функция для получения текущего времени не специфицирована. Существует множество способов реализации функции времени, каждый из них зависит от конкретной реализации виртуальной машины. Например существуют виртуальные машины синхронизирующие значение времени между потоками, поэтому может наблюдаться два эффекта с вызовом метода для получения текущего времени:
\begin{itemize}
  \item длительное время работы(значительно более длительное чем время выполнения теста);
  \item большое время обновления.
\end{itemize}

Решение о трансляции байткода в машинный код принимается в момент выполнения на основе собранной статистики об исходном коде. Для учёта данных особенностей используют методику прогрева: метод, который необходимо протестировать, выполняют некоторый промежуток времени. За это время виртуальная машина соберёт статистику необходимую для трансляции метода.

Ещё одной важной особенностью является автоматическая сборка мусора - процесс освобождения памяти объектов, ссылки на которых не достижимы в программе, с целью освободить занимаемаю ими память. Собрка мусора длительная процедура, в процессе которой выполнение программы приостанавливается. В случае если сборка мусора запустится во время выполнения измерений, результаты измерений будут искажены.

Для того чтоб избежать подобных эффектов была использована библиотека \term{JMH}\cite{jmh}(\tool{Java} \tool{microbenchmark} \tool{harness}). В данной библиотеке содержится инструментарий написания тестов производительности. Эти инструменты автоматически позволяют измерить время работы методов, решить проблемы с удалением неиспользуемого кода, провести прогрев и провести измерения. Результаты измерений представлены как выборка из нормального распределения с заданным средним и стандартным отклонением.

\subsection{Условия измерения производительности}
\begin{itemize}
  \item \textbf{ЦПУ:} Intel(R) Core(TM) i7-6700 CPU @3.40GHz.
  \item \textbf{Оперативная память:} 32GB DDR4.
  \item \textbf{Операционная система:} Linux 4.10.0-21-generic #23-Ubuntu SMP x64.
  \item \textbf{Версия Kotlin:} 1.1.1.
  \item \textbf{Версия JDK:} OpenJDK 64-Bit Server VM (build 25.131-b11, mixed mode).
  \item \textbf{Версия JMH:} 1.18.
\end{itemize}
