\subsection{Постановка задачи}
Главная цель данной работы - реализация поддержки протоколов в компиляторе языка \lang{Kotlin}. Для её достижения необходимо выполнить следующие задачи:
\begin{itemize}
    \item Исследовать способы реализации структурных типов в \tool{JVM};
    \item Реализовать и сравнить различные подходы;
    \item Придумать механизм работы протоколов и проверку типов для них в компиляторе языка \lang{Kotlin};
    \item Реализовать генерацию кода протоколов в компиляторе;
    \item Измерить производительность и сравнить полученное решение с другими языками.
\end{itemize}

Важными ограничениями для реализации является прозрачность протоколов для пользователей: должна сохраниться поддержка раздельной компиляции, генерируемый код должен быть потокобезопасным, использование должно быть схоже с обычными типами. Так же протоколы должны быть достаточно производительными: не вносить ощутимых нагрузок на потребляемую память и время работы.

\paragraph{Требования к реализации}
Перед тем как приступить к реализации, необходимо определить, какие ограничения необходимо соблюдать для получения результатов, которые удобно использовать на практике:

\begin{itemize}
  \item Язык \lang{Kotlin} совместим с \lang{Java}. Это значит, что объекты из языка \lang{Kotlin} должны быть корректными объектами для языка \lang{Java} и в обратную сторону. Одной из важных особенностей, которую хочется сохранить - это идентичность объекта, то есть приведение к структурному типу должно не модифицировать ссылку на объект.
\item Другим важным требованием является возможность использования структурных типов как в качестве типов коллекций, так и в качестве элементов существующих коллекций. Таким образом, необходимо чтобы структурные типы поддерживали типовые параметры.
\item Протоколы не должны вносить ощутимых расходов на потребление памяти и время работы при приведении типов и вызове метода.
\item Возможности использование структурных типов должны быть схожи с обычными типами.
\item Необходимо избегать генерации кода в процессе выполнения
\end{itemize}

Данные ограничения, в основном, влияют на сгенерированный код. Поэтому, сперва рассмотрены подходы для генерации и функциональность, которая может быть получена, а затем возможности особенности реализации в компиляторе.
